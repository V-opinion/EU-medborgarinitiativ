(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{39092:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/authoring/preview",function(){return i(76315)}])},99771:function(e){"use strict";var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getSurveyScoreRecommendations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"surveyId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"operate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"as"},value:{kind:"EnumValue",value:"GUEST"}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"survey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"surveyId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recommendations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"feature"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationContext"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendationData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"single"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"multiple"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"recommendationDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"question"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationContext"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendationData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"single"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"multiple"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"recommendationDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"survey"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationContext"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendationData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"single"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"multiple"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"answerOptions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"surveyQuestiontypeMax"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"recommendationDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendationId"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:2245}};n.loc.source={body:"query getSurveyScoreRecommendations($surveyId: ID!) @operate(as: GUEST) {\n  survey(id: $surveyId) {\n    id\n    score {\n      recommendations {\n        feature {\n          description\n          isGlobal\n          recommendationContext {\n            displayNumber\n            questionId\n          }\n          recommendationData {\n            single {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n            multiple {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n          }\n          recommendationDescription\n          recommendationId\n        }\n        question {\n          description\n          isGlobal\n          recommendationContext {\n            displayNumber\n            questionId\n          }\n          recommendationData {\n            single {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n            multiple {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n          }\n          recommendationDescription\n          recommendationId\n        }\n        survey {\n          description\n          isGlobal\n          recommendationContext {\n            displayNumber\n            questionId\n          }\n          recommendationData {\n            single {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n            multiple {\n              answerOptions\n              qtype\n              questionType\n              surveyLength\n              surveyQuestiontypeCount\n              surveyQuestiontypeMax\n            }\n          }\n          recommendationDescription\n          recommendationId\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.getSurveyScoreRecommendations=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=i[n]||new Set,o=new Set,s=new Set;for(r.forEach(function(e){s.add(e)});s.size>0;){var d=s;s=new Set,d.forEach(function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"getSurveyScoreRecommendations")},42888:function(e){"use strict";var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getCommentSummary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"surveyId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"operate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"as"},value:{kind:"EnumValue",value:"GUEST"}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentSummary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"surveyId"},value:{kind:"Variable",name:{kind:"Name",value:"surveyId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"questionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"query getCommentSummary($surveyId: ID!) @operate(as: GUEST) {\n  commentSummary(surveyId: $surveyId) {\n    questionId\n    commentCount\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.getCommentSummary=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=i[n]||new Set,o=new Set,s=new Set;for(r.forEach(function(e){s.add(e)});s.size>0;){var d=s;s=new Set,d.forEach(function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"getCommentSummary")},89301:function(e,n,i){"use strict";i.d(n,{Z:function(){return k}});var t=i(85893),a=i(67294),r=i(66959),o=i(80197),s=i(9008),d=i.n(s),l=i(4298),c=i.n(l),u=i(76431),m=i(32497),v=e=>{let{children:n,pageId:i,pageMetricsAttributes:o,legacyWeb:s,translationData:l,includeExperiments:v=!1,includeGTM:p=!1}=e,{user:k,environment:g,"client-config":y,GDPR:h}=(0,a.useContext)(r.vN),{countryCode:f}=g,{gtmId:w,amplitudeToken:S,dataAnalyticsAPIPath:N,loggingAPIPath:x}=y;return u.MetricsTracker.initialize({user:k,dataAnalyticsAPIPath:N,loggingAPIPath:x,country:f,legacyWeb:s,pageId:i,gtmId:w,amplitudeToken:S}),(0,t.jsxs)(m.L10nProvider,{...l,children:[(0,t.jsxs)(u.PageMetricsProvider,{pageId:i,attributes:o,GDPR:h,user:k,country:f,children:[(0,t.jsxs)(d(),{children:[(0,t.jsx)("link",{rel:"apple-touch-icon",href:"/apple-touch-icon-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"57x57",href:"/apple-touch-icon-57x57-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"60x60",href:"/apple-touch-icon-60x60-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"72x72",href:"/apple-touch-icon-72x72-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"76x76",href:"/apple-touch-icon-76x76-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"114x114",href:"/apple-touch-icon-114x114-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"120x120",href:"/apple-touch-icon-120x120-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"144x144",href:"/apple-touch-icon-144x144-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:"/apple-touch-icon-152x152-precomposed.png"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon-180x180-precomposed.png"}),(0,t.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"})]}),n]}),p&&(0,t.jsx)(c(),{id:"gtm",strategy:"afterInteractive",children:"(function (w, d, s, l, i) {w[l] = w[l] || [];w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });var f = d.getElementsByTagName(s)[0],j = d.createElement(s),dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', '".concat(w,"');")})]})},p=e=>{let{children:n,layout:{options:{translationData:i,...a}},translationData:s,staticData:d}=e;return(0,t.jsx)(o.B6,{children:(0,t.jsx)(r.Hf,{value:d,children:(0,t.jsx)(v,{translationData:s,...a,children:n})})})},k=e=>{let{children:n,layout:i,translationData:a,staticData:r}=e;return i?(0,t.jsx)(p,{layout:i,staticData:r,translationData:a,children:n}):n}},21705:function(e,n,i){"use strict";var t=i(5152);let a=i.n(t)()(async()=>Promise.all([i.e(911),i.e(509),i.e(885),i.e(187),i.e(447),i.e(504),i.e(328),i.e(486)]).then(i.bind(i,69077)).then(e=>e.CommentSheet),{loadableGenerated:{webpack:()=>[69077]},ssr:!1});n.Z=a},38198:function(e,n,i){"use strict";var t=i(5152),a=i.n(t),r=i(73708);let o=a()(async()=>Promise.resolve(r.h),{ssr:!1});n.Z=o},68649:function(e,n,i){"use strict";let t=(0,i(22873).createMemoStyles)(e=>({globalHeaderWrapper:{"& > .anon":{boxShadow:"0 2px 8px 0 rgba(0, 0, 0, 0.14)",padding:"0 ".concat(e.spacing[4],"px"),position:"sticky"},"& .sm-addon__anon--slim":{display:"flex",alignItems:"center",["@media (min-width: ".concat(e.breakpoints.xl,"px)")]:{marginTop:0,marginRight:0},["@media (max-width: ".concat(e.breakpoints.xl-1,"px)")]:{marginTop:e.spacing[2],marginRight:e.spacing[4]}}},secondaryHeaderWrapper:{borderTop:"none",borderRight:"none",borderLeft:"none",background:e.palette.background.light}}));n.Z=t},76315:function(e,n,i){"use strict";i.r(n),i.d(n,{__N_SSP:function(){return el},default:function(){return ec}});var t,a,r=i(85893),o=i(9008),s=i.n(o),d=i(67294),l=i(389),c=i(32497),u=i(76431),m=i(50199);let v=(0,d.createContext)(void 0),p=e=>{let{children:n}=e,[i,t]=(0,d.useState)("DESKTOP"),[a,o]=(0,d.useState)(74);return(0,r.jsx)(v.Provider,{value:{selectedDevice:i,setDevice:t,footerHeight:a,setFooterHeight:o},children:n})},k=function(e){switch(e){case"MOBILE":return{width:"410px",height:"90%"};case"TABLET":return{width:"75%",height:"90%"};default:return{width:"100%",height:"100%"}}};function g(){let e=(0,d.useContext)(v);if(!e)throw Error("Config context must be accessed from within ConfigProvider");return e}var y=i(89301),h=i(46829),f=i(5883),w=i(34725),S=i(22873),N=i(69535),x=i(82345),b=i(42888),E=i.n(b),_=i(99771),C=i.n(_),F=i(7191);(t=a||(a={})).PageLoaded="sm:page_loaded",t.QuestionClicked="sm:question_clicked",t.NotaAnswerClicked="sm:nota_answer_clicked",t.AnswerClicked="sm:answer_clicked",t.MultiAnswerClicked="sm:multi_answer_clicked",t.CommentOtherClicked="sm:comment_other_clicked",t.DropdownAnswerSelected="sm:dropdown_answer_selected";var T=e=>{let n=(0,d.useRef)(""),[i,t]=(0,d.useState)({id:e}),[a,r]=(0,d.useState)({}),o=(e,i,t)=>("sm:comment_other_clicked"===e.eventName&&(n.current=i),"sm:answer_clicked"===e.eventName||"sm:nota_answer_clicked"===e.eventName)?[...n.current?[n.current]:[],i]:[...t,i],s=(0,d.useCallback)((e,n,i,t)=>"sm:nota_answer_clicked"!==e.eventName&&n?t:o(e,i,t),[]),l=(0,d.useCallback)(e=>{var i,t;let{currActiveAnswers:a,parsedData:r}=e,o=r.element.split("_"),d=o[(null==o?void 0:o.length)-1],l=o[0],c=null!==(i=a[l])&&void 0!==i?i:[],u=c.includes(d);return r.selected_state?{[l]:s(r,u,d,c)}:("sm:comment_other_clicked"===r.eventName&&(n.current=""),{[l]:null!==(t=c.filter(e=>e!==d))&&void 0!==t?t:[]})},[s]),c=e=>{if(window.location.origin!==e.origin||!e.data||"object"==typeof e.data)return!1;let n=JSON.parse(e.data);return"object"==typeof n&&!!n.eventName},u=e=>{let n=document.querySelector("[class^=randomizationBanner]"),i=document.getElementById("page-accordion-".concat(e)),t=null==i?void 0:i.previousElementSibling;n&&t===n?n.scrollIntoView({block:"start"}):null==i||i.scrollIntoView({block:"start"})},m=e=>{let n=!1,i=document.querySelector('[class^="layoutWrapper"]'),t=document.querySelector('[class^="SOPHeader"]');if(e&&i&&t){let{bottom:a,top:r,height:o}=e.getBoundingClientRect(),{height:s}=i.getBoundingClientRect(),{bottom:d}=t.getBoundingClientRect();n=r+Math.ceil(o/2)>=d&&a-Math.ceil(o/2)<=s}null==e||e.scrollIntoView({behavior:n?"smooth":"auto",block:"start"})},v=(0,d.useCallback)(e=>{let{pageId:n,validationErrorQuestionId:i}=e,a=i?i.split("-validation-message")[0]:"";t({id:a,pageId:n}),a?m(document.getElementById("question-accordion-".concat(a))):u(n)},[]),p=(0,d.useCallback)(e=>{if(e.element){let a=e.element.split("_")[0];i.id!==a&&(t(e=>({...e,id:a})),m(document.getElementById("question-accordion-".concat(e.element)))),r(i=>({...i,[a]:[...n.current?[n.current]:[],e.choice_val]}))}},[i.id]);return(0,d.useEffect)(()=>{let e=e=>{if(!c(e))return;let n=JSON.parse(e.data);switch(n.eventName){case"sm:page_loaded":v({pageId:n.page_id,validationErrorQuestionId:n.validationErrorQuestionId});break;case"sm:question_clicked":t(e=>({...e,id:n.element})),m(document.getElementById("question-accordion-".concat(n.element)));break;case"sm:nota_answer_clicked":case"sm:comment_other_clicked":case"sm:multi_answer_clicked":case"sm:answer_clicked":n.element&&r(e=>({...e,...l({currActiveAnswers:e,parsedData:n})}));break;case"sm:dropdown_answer_selected":p(n)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[i.id,l,v,p]),{activeAnswers:a,activeQuestion:i}},I=i(21705);let j=(0,S.createMemoStyles)(e=>({layoutWrapper:e=>{let{isLoggedIn:n,isMobile:i,footerHeight:t}=e;return{height:i?"calc(100vh - 48px)":"calc(100vh - (48px + ".concat(t,"px))"),minWidth:"144px",...!n&&{height:"calc(100vh - 115px)"}}},mainContent:n=>{let{allowMiddlePanelScroll:i}=n;return{minHeight:"100%",borderTop:"none",borderRight:"none",borderBottom:"none",backgroundColor:e.palette.background.main,overflowY:i?"scroll":"hidden",borderColor:e.palette.border.main}}}));var P=e=>{var n,i,t,a,o,s,l;let{allowMiddlePanelScroll:c,children:m,commentId:v,editLink:p,guestSessionExpiredRedirectUrl:k,isLoggedIn:y,isMobile:S=!1,metricsMetadata:b,survey:_,user:P,authGuestCookie:A}=e,{footerHeight:D}=g(),{activeQuestion:M,activeAnswers:O}=T(""),{mainContent:R,layoutWrapper:q}=j({allowMiddlePanelScroll:c,isLoggedIn:y,isMobile:S,footerHeight:D}),{handleCommentsClick:L,handleGeniusClick:B,showCommentsPanel:Q,showGeniusPanel:U,initializePanel:G}=(0,F.e)(),[V,z]=(0,d.useState)(!0),[H,W]=(0,d.useState)(),[K,Z]=(0,d.useState)(v);(0,d.useEffect)(()=>{K&&L(!0)},[K,L]);let{data:X,refetch:Y}=(0,h.useQuery)(E(),{fetchPolicy:"cache-first",variables:{surveyId:null==_?void 0:_.id},skip:!(null==_?void 0:_.id),ssr:!1}),{data:J}=(0,h.useQuery)(C(),{fetchPolicy:"cache-first",variables:{surveyId:null==_?void 0:_.id},skip:!(null==_?void 0:_.id)||!y,ssr:!1}),$=e=>{u.MetricsTracker.track({name:u.USER_EVENTS.ELEMENT_INTERACTION,data:{...b,amplitudeEvent:"genius clicked cta",ctaName:e}})},ee=()=>{Y({variables:{surveyId:null==_?void 0:_.id},skip:!(null==_?void 0:_.id)})},en=()=>{window.location.assign(k)},ei=null==J?void 0:null===(i=J.survey)||void 0===i?void 0:null===(n=i.score)||void 0===n?void 0:n.recommendations;return(0,d.useEffect)(()=>{var e;if((null==_?void 0:null===(e=_.score)||void 0===e?void 0:e.rating)&&(null==ei?void 0:ei.question)&&(null==ei?void 0:ei.survey)){let e=ei.question.length>0||ei.survey.length>0;G(_.score.rating,e)}},[G,null==_?void 0:null===(t=_.score)||void 0===t?void 0:t.rating,ei]),(0,d.useEffect)(()=>{Q||W(void 0)},[Q]),(0,r.jsx)("div",{className:q,children:(0,r.jsxs)(w.InlineSheet.Wrapper,{overflowYHidden:!0,children:[_&&!S&&(0,r.jsx)(x.r,{activeQuestion:M,activeAnswers:O,comments:X,metricsMetadata:b,onCommentClick:e=>{W(e),Q||L(!0)},onGuestSessionExpired:en,onOpenCloseClick:()=>z(e=>!e),show:V,survey:_,settings:{isAdvancedBranchingEnabled:null!==(s=null==P?void 0:null===(a=P.features)||void 0===a?void 0:a.advanced_branching)&&void 0!==s&&s}}),(0,r.jsx)(f.Box,{flexItemGrow:!0,className:R,borderColor:"muted",children:m}),(0,r.jsx)(I.Z,{guestCookie:y?void 0:A,resourceId:null!==(l=null==_?void 0:_.id)&&void 0!==l?l:"",resourceType:"survey",show:Q,targetId:H,targetType:"question",onClose:()=>{Z(void 0),W(void 0),L()},onCommentAdded:ee,onCommentDeleted:ee,onCommentResolved:ee,onGuestSessionExpired:en,useInlineSheet:!0,useLocalizationProvider:!1,mentionedCommentId:K,metricsMetadata:{pageName:b.pageName}}),y&&!S&&(0,r.jsx)(N.L,{metricsMetadata:b,rating:null==_?void 0:null===(o=_.score)||void 0===o?void 0:o.rating,recommendations:ei,show:U,onClose:()=>{$("close panel"),B(!1)},onEditSurvey:()=>{$("edit survey"),p&&window.location.assign(p)}})]})})},A=i(28699),D=i(47044),M=i(11165),O=i(25675),R=i.n(O),q={src:"//prod.smassets.net/assets/smweb/_next/static/media/feedback-header.510ceab0.png",height:231,width:414,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAYUlEQVR42gUA2w5AILT//yxvZjMMQxflMhUnjtB6M7JGVN/BULNLczTTCwrt/Dkyx0t5Ww11VuatGCgspe7XxxEWDun3QjZJlzIjKer2XPi7Ex5g9Ba8E5uC56S3EQFEgB/QrVYgzrzACQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4};let L=(0,c.defineMessages)({FEEDBACK_POPOUT_TRIGGER:{id:"feedbackPopout.FeedbackPopout.Trigger",defaultMessage:"Feedback",description:"[Type: button][Vis: med] - Preview feedback popout trigger"},FEEDBACK_POPOUT_HEADER:{id:"feedbackPopout.FeedbackPopout.Header",defaultMessage:"How do you like it?",description:"[Type: header][Vis: low] - Preview feedback popout header"},FEEDBACK_POPOUT_BODY:{id:"feedbackPopout.FeedbackPopout.Body",defaultMessage:"Let us know what works and what doesn't so we can make your experience better.",description:"[Type: paragraph][Vis: low] - Preview feedback popout body"},FEEDBACK_POPOUT_CTA:{id:"feedbackPopout.FeedbackPopout.Cta",defaultMessage:"Leave feedback",description:"[Type: button][Vis: low] - Preview feedback popout CTA"}}),B=(0,l.QM)({feedbackButton:{transformOrigin:"bottom right",transform:"rotate(-90deg) translateX(75%)",right:0,position:"fixed"},popoutContainer:{position:"fixed",bottom:"300px",right:"40px"}}),Q="https://www.surveymonkey.com/r/M52DQNK";var U=e=>{let{userId:n,surveyId:i,packageId:t,languageCode:a}=e,{feedbackButton:o,popoutContainer:s}=B(),d=""!==n&&""!==i&&""!==t&&""!==a?"".concat(Q,"?XuUW2AdpMhjx6p9SeTtwUg=").concat(n,"&FZR90jZULltFBzu77A8GEQ=").concat(i,"&f7FTGwWHw2BbXy4OWz=").concat(t,"&rPjfvkdUgX2CR4d5YhQ=New%20Preview&lang=").concat(a):Q;return(0,r.jsx)(f.Box,{className:s,children:(0,r.jsxs)(A.yR,{placement:"left",trigger:(0,r.jsx)(f.Box,{className:o,children:(0,r.jsx)(D.Button,{color:"secondary",children:(0,c.t)(L.FEEDBACK_POPOUT_TRIGGER)})}),children:[(0,r.jsx)(A.yR.Masthead,{children:(0,r.jsx)(R(),{src:q,unoptimized:!0,alt:"feedback header"})}),(0,r.jsx)(A.yR.Header,{children:(0,c.t)(L.FEEDBACK_POPOUT_HEADER)}),(0,r.jsx)(A.yR.Body,{children:(0,r.jsx)(M.Typography,{variant:"bodySm",children:(0,c.t)(L.FEEDBACK_POPOUT_BODY)})}),(0,r.jsx)(A.yR.Footer,{align:"left",children:(0,r.jsx)(D.Button,{size:"sm",href:d,target:"_blank",children:(0,c.t)(L.FEEDBACK_POPOUT_CTA)})})]})})},G=i(5152),V=i.n(G),z=i(38055);let H=V()(async()=>Promise.resolve(z.p),{ssr:!1}),W=(0,S.createMemoStyles)(()=>({footerWrapper:e=>{let{showCommentsPanel:n,isLoggedIn:i}=e;return{...!i&&{"& > div":{right:0,transform:"translateX(".concat(n?-380:-20,"px)"),transition:"transform 450ms ".concat(n?"cubic-bezier(0, 0, 0, 1)":"cubic-bezier(0.2, 0, 0.1, 1)")}}}}}));var K=e=>{let{continueLink:n,editLink:i,isLoggedIn:t,metricsMetadata:a,surveyScore:o}=e,s=(0,d.useRef)(null),{setDevice:l,selectedDevice:c,setFooterHeight:m}=g(),{handleGeniusClick:v,showCommentsPanel:p}=(0,F.e)(),{footerWrapper:k}=W({showCommentsPanel:p,isLoggedIn:t});(0,d.useEffect)(()=>{let e=null==s?void 0:s.current;if(e){let n=new ResizeObserver(()=>m(e.offsetHeight));return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}return()=>{}},[m]);let y=e=>{u.MetricsTracker.track({name:u.USER_EVENTS.ELEMENT_INTERACTION,data:{...a,amplitudeEvent:"create clicked bottom bar cta",ctaName:e}})};return(0,r.jsx)("div",{className:k,ref:s,children:(0,r.jsx)(H,{continueLink:n,editLink:i,isLoggedIn:t,selectedDevice:c,surveyScore:o,continueClickHandler:()=>{y("continue")},editClickHandler:()=>{y("edit survey")},selectedDeviceClickHandler:e=>{y("".concat(null==e?void 0:e.toLowerCase()," preview")),l(e)},viewTipsClickHandler:e=>{e&&y("view genius details"),v(e)}})})},Z=i(97351),X=i(22608);let Y=V()(async()=>Promise.resolve(X.c),{ssr:!1}),J=V()(async()=>Promise.all([i.e(980),i.e(186),i.e(691),i.e(697),i.e(934),i.e(798),i.e(454)]).then(i.bind(i,79765)).then(e=>e.GuestPreviewHeader),{loadableGenerated:{webpack:()=>[79765]},ssr:!1}),$=V()(async()=>Promise.all([i.e(980),i.e(186),i.e(691),i.e(697),i.e(934),i.e(798),i.e(454)]).then(i.bind(i,79765)).then(e=>e.ShareModal),{loadableGenerated:{webpack:()=>[79765]},ssr:!1});var ee=i(38198),en=i(68649),ei=e=>{var n,i,t;let{authGuestCookie:a,ctaRedirectUrl:o,guestSessionExpiredRedirectUrl:s,isInGuestAccessExpTreatment:l,locale:c,metricsMetadata:m,showShareButton:v,survey:p,user:k,joinTeamSlug:g,joinTeamMetricsMetadata:y}=e,{handleCommentsClick:w}=(0,F.e)(),[S,N]=(0,d.useState)(!1),{globalHeaderWrapper:x,secondaryHeaderWrapper:b}=(0,en.Z)(),{data:_}=(0,h.useQuery)(E(),{fetchPolicy:"cache-first",variables:{surveyId:null==p?void 0:p.id},skip:!(null==p?void 0:p.id),ssr:!1}),C=(0,d.useMemo)(()=>{var e;return null==_?void 0:null===(e=_.commentSummary)||void 0===e?void 0:e.map(e=>e.commentCount).reduce((e,n)=>e+n,0)},[_]),T="".concat((0,Z.Ri)((null==p?void 0:null===(n=p.links)||void 0===n?void 0:n.edit)||""),"&collabModal=true"),I=e=>{u.MetricsTracker.track({name:u.USER_EVENTS.ELEMENT_INTERACTION,data:{...m,amplitudeEvent:"preview header clicked cta",ctaName:e}})};return(null==k?void 0:k.authenticated)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{commentCount:C||0,homeUrl:(0,Z.Ri)("/"),isInGuestAccessExpTreatment:l,showShareButton:v,surveyTitle:(null==p?void 0:p.title)||"",onCommentsClick:()=>{I("commenting"),w()},onGoldieClick:()=>I("goldie"),onShareClick:()=>{if(I("share"),l&&(null==p?void 0:p.isOwner))N(!0);else{var e;null===(e=window.open(T,"_blank"))||void 0===e||e.focus()}},joinTeamSlug:g,joinTeamMetricsMetadata:y}),p&&(0,r.jsx)($,{metricsMetadata:{pageName:m.pageName},resourceId:p.id,show:S,onClose:()=>{N(!1)}},"share-modal")]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Box,{className:x,children:(0,r.jsx)(ee.Z,{color:"light",ctaRedirectUrl:o,isEUDC:null==c?void 0:c.isEUDC,isMRX:!1,isUserAuthenticated:!1,lang:null==k?void 0:null===(t=k.core)||void 0===t?void 0:null===(i=t.language)||void 0===i?void 0:i.language_code,user:k,variant:"slim",joinTeamSlug:g,joinTeamAmplitudeProps:y})}),(0,r.jsx)(f.Box,{className:b,borderColor:"muted",children:(0,r.jsx)(J,{metricsMetadata:{pageName:m.pageName},commentCount:C,guestCookie:a,resourceId:null==p?void 0:p.id,surveyTitle:(null==p?void 0:p.title)||"",onCommentsClick:()=>{I("commenting"),w()},onGuestSessionExpired:()=>{window.location.assign(s)}})})]})},et=(e,n)=>{let[i,t]=(0,d.useState)(0);return(0,d.useEffect)(()=>{let i=e=>{u.MetricsTracker.track({name:u.USER_EVENTS.ELEMENT_INTERACTION,data:{...n,amplitudeEvent:"preview iframe clicked cta",ctaName:e}})},a=n=>{if(window.location.origin!==n.origin||!n.data||"object"==typeof n.data)return;let a=JSON.parse(n.data);if("object"==typeof a&&a.eventName)switch(a.eventName){case"sm:preview_survey_again":i("preview survey again"),t(e=>e+1);break;case"sm:return_to_survey_editor":i("return to survey editor"),window.location.assign("/create/?sm=".concat(e));break;case"sm:page_next_clicked":i("next");break;case"sm:page_prev_clicked":i("previous");break;case"sm:page_done_clicked":i("done");break;case"sm:preview_create_survey":i("create your own survey")}};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[e,n]),i};let ea=(0,c.defineMessages)({SURVEY_PREVIEW:{id:"authoring.copy.SurveyPreview",defaultMessage:"Survey preview",description:"[Type: Header][vis: high] - Header message on survey preview webpage"}}),er=(e,n)=>{let i={surveyId:"string"==typeof(null==e?void 0:e.id)?parseInt(e.id,10):null==e?void 0:e.id,surveyOwnerId:"string"==typeof(null==e?void 0:e.userId)?parseInt(e.userId,10):null==e?void 0:e.userId};return n?{...i,guestId:n,pageName:"Review Session"}:{...i,pageName:"New Preview"}},eo=(0,l.QM)(e=>({desktopIframe:{display:"block",backgroundColor:e.palette.background.light,border:"none",margin:"0"},mobileTabletIframe:{display:"block",backgroundColor:e.palette.background.light,border:"none",boxShadow:"0 1px 2px 0 rgba(0,0,0,0.25)",margin:"".concat(e.spacing[5],"px auto")}})),es=(e,n,i)=>{var t;return{app:"authoringweb",pageName:"preview q2 2024 version",isPreview:!0,surveyId:null==e?void 0:e.id,...!(null==e?void 0:e.isOwner)&&{collaboratorId:null==n?void 0:null===(t=n.core)||void 0===t?void 0:t.user_id},...i&&{guestId:i}}},ed=e=>{let{sm:n,survey:i,user:t,guestId:a}=e,{desktopIframe:o,mobileTabletIframe:l}=eo(),{selectedDevice:m}=g(),{width:v,height:p}=k(m),y=et(null==n?void 0:n.smSlug,es(i,t,a)),h="/r/?sm=".concat(null==n?void 0:n.smPreviewSlug,"&embedded=true");return(0,d.useEffect)(()=>{var e;u.MetricsTracker.track({name:u.USER_EVENTS.PAGE_VIEW,data:{...es(i,t,a),amplitudeEvent:"page viewed",urlPath:window.location.pathname,surveyGeniusScore:null==i?void 0:null===(e=i.score)||void 0===e?void 0:e.rating}})},[i,t,a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:(0,c.t)(ea.SURVEY_PREVIEW)}),!(null==t?void 0:t.authenticated)&&(0,r.jsx)("link",{rel:"stylesheet",href:"https://cdn.smassets.net/assets/wds/4_24_1/wds-react/wds-react.min.css"})]}),i?(0,r.jsx)("iframe",{title:"survey preview",name:"surveyPreview",src:h,allowFullScreen:!0,width:v,height:p,className:"DESKTOP"===m?o:l,sandbox:"allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation-by-user-activation"},y):(0,r.jsx)(r.Fragment,{children:"No survey is found, make sure you provide ?sm=sm_token in the url"})]})};ed.getLayout=function(e){var n,i,t,a,o,s;let{authGuestCookie:d,layout:l,staticData:c,translationData:u,sm:v,survey:k,user:g,guestId:h,guestAccessExpTreatment:f,inSurveyConnectExpTreatment:w,joinTeamSlug:S}=e.props,N=w?null==k?void 0:null===(n=k.links)||void 0===n?void 0:n.connect:null==k?void 0:null===(i=k.links)||void 0===i?void 0:i.collect,x=(null==k?void 0:null===(t=k.links)||void 0===t?void 0:t.edit)||"/create/?sm=".concat(null==v?void 0:v.smSlug),b=(null==k?void 0:null===(a=k.links)||void 0===a?void 0:a.previewTransformation)||"/authoring/preview/?sm=".concat(null==v?void 0:v.smSlug),E="/authoring/preview/guest_session_expired/?sm=".concat(null==v?void 0:v.smSlug),_=null==g?void 0:g.authenticated,C=es(k,g,h),F=er(k,h),T=(null==g?void 0:null===(s=g.core)||void 0===s?void 0:null===(o=s.package)||void 0===o?void 0:o.package_id)!=="1";return(0,r.jsx)(y.Z,{layout:l,staticData:c,translationData:u,children:(0,r.jsx)(p,{children:(0,r.jsx)(m.Responsive,{minWidth:"md",children:n=>{var i,t,a,o,s,l,u,m,p,y;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei,{authGuestCookie:d,ctaRedirectUrl:b,guestSessionExpiredRedirectUrl:E,isInGuestAccessExpTreatment:"Treatment_with_guest_access"===f,locale:c.locale,metricsMetadata:C,showShareButton:T,survey:e.props.survey,user:g,joinTeamSlug:S,joinTeamMetricsMetadata:F}),(0,r.jsx)(P,{authGuestCookie:d,commentId:null==v?void 0:null===(i=v.smParams)||void 0===i?void 0:i.commentId,editLink:x,guestSessionExpiredRedirectUrl:E,isLoggedIn:_,isMobile:!n,metricsMetadata:C,survey:k,user:g,children:e}),n&&(0,r.jsx)(K,{continueLink:N,editLink:x,isLoggedIn:_,metricsMetadata:C,surveyScore:null==k?void 0:k.score}),(0,r.jsx)(U,{userId:null!==(u=null==g?void 0:null===(t=g.core)||void 0===t?void 0:t.user_id)&&void 0!==u?u:"",surveyId:null!==(m=null==k?void 0:k.id)&&void 0!==m?m:"",packageId:null!==(p=null==g?void 0:null===(o=g.core)||void 0===o?void 0:null===(a=o.package)||void 0===a?void 0:a.package_id)&&void 0!==p?p:"",languageCode:null!==(y=null==g?void 0:null===(l=g.core)||void 0===l?void 0:null===(s=l.language)||void 0===s?void 0:s.language_code)&&void 0!==y?y:""})]})}})})})};var el=!0,ec=ed}},function(e){e.O(0,[592,551,662,683,498,232,341,927,328,77,337,500,114,888,774,179],function(){return e(e.s=39092)}),_N_E=e.O()}]);
//# sourceMappingURL=preview-613b31da386819c5.js.map